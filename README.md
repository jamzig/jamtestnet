# âš¡ JamZig State Transition Test Vectors

JamZig is a Zig-powered implementation of the JAM Protocol. This repository contains state transition test vectors generated by JamZig for cross-implementation testing and validation.

## Overview

These test vectors enable teams to validate state transitions by sharing pre-state, block, and post-state data. This allows verification that different implementations can read key objects and perform identical state transitions according to the GP Spec.

The vectors are procedurally generated from a seed, making them deterministic and reproducible. The vectors do not use community-generated keys; instead, all keys are also derived from the same seed.

The format is compatible with: https://github.com/jam-duna/jamtestnet

## File Structure

```
state_transitions/  # Machine-friendly state transitions
  $epoch_$slot-in-epoch.json
  $epoch_$slot-in-epoch.bin
```

File names are output to allow for easy sorting.

## Configuration

```zig
pub const JAMDUNA_PARAMS = jam_params.Params{
    .epoch_length = 12,
    .ticket_submission_end_epoch_slot = 10,
    .validators_count = 6,
    .validators_super_majority = 5,
    .validator_rotation_period = 4,
    .core_count = 2,
    .avail_bitfield_bytes = (2 + 7) / 8,
    // JAMDUNA changes
    .max_ticket_entries_per_validator = 3, // N
    .max_authorizations_queue_items = 80, // Q
    .max_authorizations_pool_items = 2,
};
```

## Data Format

JamZig uses a simplified binary format focusing on key-value pairs, following JamDuna's format:

```zig
pub const TestStateTransition = struct {
    pre_state: StateSnapshotRaw,
    block: types.Block,
    post_state: StateSnapshotRaw,
};

pub const StateSnapshotRaw = struct {
    state_root: types.StateRoot,
    keyvals: []KeyVal,
};

pub const KeyVal = struct {
    key: []const u8,
    val: []const u8,
    id: []const u8,
    desc: []const u8,
};
```

NOTE: While JamZig export focuses on binary deserialization, the JSON files are provided in JamDuna's format for compatibility, including additional `id` and `desc` fields.

## Safrole Mode

The test vectors alternate between keys and tickets mode to validate correct state progression and fallback behavior.

## Contact

- Email: contact@jamzig.dev 
- Twitter: https://x.com/jamzig_dev

## License

MIT
